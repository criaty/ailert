<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Post Image</title>

    <!-- Font for emojis -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap"
      rel="stylesheet"
      crossorigin="anonymous"
    />

    <script>
      // Call this function and pass in the name of the font you want to check for availability.
      const doesFontExist = (fontFamily) => {
        // creating our in-memory Canvas element where the magic happens
        let canvas;
        canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        if (!context) return false;
        // the text whose final pixel size I want to measure
        const text = 'abcdefghijklmnopqrstuvwxyz0123456789';
        // specifying the baseline font
        context.font = '72px monospace';
        // checking the size of the baseline text
        const baselineSize = context.measureText(text).width;
        // specifying the font whose existence we want to check
        context.font = "72px '" + fontFamily + "', monospace";
        // checking the size of the font we want to check
        const newSize = context.measureText(text).width;
        // removing the Canvas element we created
        canvas = null;
        //
        // If the size of the two text instances is the same,
        // the font does not exist because it is being rendered
        // using the default sans-serif font
        //
        if (newSize === baselineSize) {
          return false;
        } else {
          return true;
        }
      };

      const addToHead = (url) => {
        const link = document.createElement('link');
        link.href = url;
        link.rel = 'stylesheet';
        link.crossOrigin = 'anonymous';

        document.head.appendChild(link);
      };

      const loadFont = async (fontFamily) => {
        // Check if the font family was already added
        const fontExist = doesFontExist(fontFamily);
        // console.log('fontExist', fontExist);
        if (fontExist) return;

        let family = fontFamily;
        family = family.replace(' ', '+').replace(/["']/g, '');

        const googleFontUrl = `https://fonts.googleapis.com/css2?family=${family}:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap`;

        addToHead(googleFontUrl);

          // Get css rules for the font from the above url
        let answer;
        let fontRules;
        try {
          answer = await fetch(googleFontUrl);
          fontRules = await answer.text();
          //
        } catch (e) {
          return;
        }

        if (!fontRules) {
          // console.log("Undefined fontRules")
          return;
        }

        const fontList = fontRules
          .match(/(\/\* latin \*\/[\S\s]*?})/g) // Filter only /* latin */ fonts
          ?.map((font) => {
            const style = font.match(/(?<=font-style:\s)\w*/g);
            const weight = font.match(/(?<=font-weight:\s)\d*/g);
            const url = font.match(/(url\(.*?\))/g); // url(...)
            return {
              style: style?.[0],
              weight: weight?.[0],
              url: url?.[0],
            };
          });

        if (!fontList) {
          // console.log("Undefined fontList")
          return;
        }

        try {
          // Add all latin fonts for the family
          await Promise.all(
            fontList.map(async ({ style, weight, url }) => {
              if (!url) return;
              const font = new FontFace(fontFamily, url, {
                style,
                weight,
                display: 'swap',
              });
              await font.load();
              document.fonts.add(font);
              // console.log('font', font);
            }),
          );
        } catch (e) {
          console.log(e);
        }
      };
    </script>

    <!-- Styles -->
    <style data-emotion="css-global" data-s="">
      html {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        box-sizing: border-box;
        -webkit-text-size-adjust: 100%;
      }
    </style>
    <style data-emotion="css-global" data-s="">
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
    </style>
    <style data-emotion="css-global" data-s="">
      html {
        font-size: 62.5%;
        width: 100%;
        height: 100%;
        -webkit-overflow-scrolling: touch;
      }
    </style>
    <style data-emotion="css-global" data-s="">
      img {
        display: block;
        max-width: 100%;
        min-width: 100%;
      }
    </style>
  </head>

  <body>
    <div id="root"><div style="width: 100%; position: relative; overflow: hidden; padding-top: calc(125%); height: 1350px;"><div style="position: absolute; inset: 0px; transform-origin: 0px 0px; width: 1080px; height: 1350px; transform: scale(1); background-color: rgb(64, 45, 39);"><div><div style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 100px; left: 530px; width: 456px; height: 684px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; transform: translate(-480px, 166px); z-index: 0;"><div><img width="2160px" src="http://localhost:9199/v0/b/post-gpt.appspot.com/o/images%2Fusers%2F7aNXWOUjLYTLAfFKBRIb%2Fposts%2FpNZN0Urdb4fwfUHcUQti%2Fimage1-p7iRA.webp?alt=media"></div></div></div><div><div style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 775px; left: 530px; width: 550px; height: 475px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; z-index: 1;"></div></div><div><div style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 10px; left: 860px; width: 100px; height: 115px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; transform: translate(-810px, 40px); z-index: 1;"><div><img width="2160px" src="http://localhost:9199/v0/b/post-gpt.appspot.com/o/images%2Fusers%2F7aNXWOUjLYTLAfFKBRIb%2Fposts%2FpNZN0Urdb4fwfUHcUQti%2Fimage3-e2scX.webp?alt=media"></div></div></div><div><div style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 1280px; left: 580px; width: 230px; height: 60px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; transform: translate(-530px, -140px); font-size: 37px; z-index: 1; color: rgb(255, 255, 255); font-family: Cormorant; font-weight: 600; text-align: start; text-transform: none;"></div></div><div><div style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 1280px; left: 820px; width: 309px; height: 50px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; transform: translate(-770px, -191.754px); font-size: 28px; z-index: 1; color: rgb(255, 255, 255); font-family: Montserrat; font-weight: 500; text-align: start; text-transform: none;"></div></div><div><div class="textToFit" style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 150px; left: 50px; width: 465px; height: 173px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; transform: translate(540px, 186px); font-size: 64px; z-index: 1; color: rgb(255, 255, 255); font-family: cormorant; font-weight: 500; text-transform: uppercase; font-family: Cormorant, Noto Color Emoji;"><div style="width: inherit; height: inherit; white-space: pre-wrap; word-break: break-word;"><p><span>Oferta imperd√≠vel! üåü</span></p></div></div></div><div><div class="textToFit" style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 570px; left: 50px; width: 439px; height: 385px; position: absolute; letter-spacing: 0.01px; line-height: 1.2; transform: translate(553px, -49px); font-size: 34px; z-index: 1; color: rgb(255, 255, 255); font-family: Cormorant; font-weight: 600;"><div style="width: inherit; height: inherit; white-space: pre-wrap; word-break: break-word;"><p><span>Descubra seu novo lar no Flamengo: um im√≥vel espetacular, com 3 quartos amplos, √°reas de lazer completas, incluindo playground e piscina, al√©m de uma vaga de garagem exclusiva! Tudo isso em uma das regi√µes mais desejadas do Rio de Janeiro.</span></p></div></div></div><div><div class="textToFit" style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 940px; left: 50px; width: 407px; height: 63px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; transform: translate(50px, 52.072px); font-size: 39px; z-index: 1; color: rgb(255, 255, 255); font-family: Montserrat; font-weight: 300; text-transform: uppercase; background-color: inherit; border-color: inherit; font-family: Cormorant, Noto Color Emoji;"><div style="width: inherit; height: inherit; white-space: pre-wrap; word-break: break-word;"><p><span>Visualize sua vida aqui! üè† üß∂</span></p></div></div></div><div><div style="min-width: 100px; min-height: 50px; overflow-wrap: break-word; white-space: pre-line; top: 1100px; left: 70px; width: 400px; height: 69px; position: absolute; letter-spacing: 0.01px; line-height: 0.98; transform: translate(280px, 131px); z-index: 1; color: rgb(255, 255, 255); font-family: Cormorant; font-weight: 500; text-align: center; text-transform: none; display: flex; justify-content: center; align-items: center; border: 2px solid rgba(0, 0, 0, 0); background-color: inherit; box-sizing: border-box;"></div></div></div></div></div>
  </body>

  <script>
// https://github.com/STRML/textFit/blob/master/textFit.min.js
(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.textFit=factory()}})(typeof global==="object"?global:this,function(){"use strict";var defaultSettings={alignVert:false,alignHoriz:false,multiLine:false,detectMultiLine:true,minFontSize:6,maxFontSize:80,reProcess:true,widthOnly:false,alignVertWithFlexbox:false};return function textFit(els,options){if(!options)options={};var settings={};for(var key in defaultSettings){if(options.hasOwnProperty(key)){settings[key]=options[key]}else{settings[key]=defaultSettings[key]}}if(typeof els.toArray==="function"){els=els.toArray()}var elType=Object.prototype.toString.call(els);if(elType!=="[object Array]"&&elType!=="[object NodeList]"&&elType!=="[object HTMLCollection]"){els=[els]}for(var i=0;i<els.length;i++){processItem(els[i],settings)}};function processItem(el,settings){if(!isElement(el)||!settings.reProcess&&el.getAttribute("textFitted")){return false}if(!settings.reProcess){el.setAttribute("textFitted",1)}var innerSpan,originalHeight,originalHTML,originalWidth;var low,mid,high;originalHTML=el.innerHTML;originalWidth=innerWidth(el);originalHeight=innerHeight(el);if(!originalWidth||!settings.widthOnly&&!originalHeight){if(!settings.widthOnly)throw new Error("Set a static height and width on the target element "+el.outerHTML+" before using textFit!");else throw new Error("Set a static width on the target element "+el.outerHTML+" before using textFit!")}if(originalHTML.indexOf("textFitted")===-1){innerSpan=document.createElement("span");innerSpan.className="textFitted";innerSpan.style["display"]="inline-block";innerSpan.innerHTML=originalHTML;el.innerHTML="";el.appendChild(innerSpan)}else{innerSpan=el.querySelector("span.textFitted");if(hasClass(innerSpan,"textFitAlignVert")){innerSpan.className=innerSpan.className.replace("textFitAlignVert","");innerSpan.style["height"]="";el.className.replace("textFitAlignVertFlex","")}}if(settings.alignHoriz){el.style["text-align"]="center";innerSpan.style["text-align"]="center"}var multiLine=settings.multiLine;if(settings.detectMultiLine&&!multiLine&&innerSpan.scrollHeight>=parseInt(window.getComputedStyle(innerSpan)["font-size"],10)*2){multiLine=true}if(!multiLine){el.style["white-space"]="nowrap"}low=settings.minFontSize;high=settings.maxFontSize;var size=low;while(low<=high){mid=high+low>>1;innerSpan.style.fontSize=mid+"px";if(innerSpan.scrollWidth<=originalWidth&&(settings.widthOnly||innerSpan.scrollHeight<=originalHeight)){size=mid;low=mid+1}else{high=mid-1}}if(innerSpan.style.fontSize!=size+"px")innerSpan.style.fontSize=size+"px";if(settings.alignVert){addStyleSheet();var height=innerSpan.scrollHeight;if(window.getComputedStyle(el)["position"]==="static"){el.style["position"]="relative"}if(!hasClass(innerSpan,"textFitAlignVert")){innerSpan.className=innerSpan.className+" textFitAlignVert"}innerSpan.style["height"]=height+"px";if(settings.alignVertWithFlexbox&&!hasClass(el,"textFitAlignVertFlex")){el.className=el.className+" textFitAlignVertFlex"}}}function innerHeight(el){var style=window.getComputedStyle(el,null);return el.clientHeight-parseInt(style.getPropertyValue("padding-top"),10)-parseInt(style.getPropertyValue("padding-bottom"),10)}function innerWidth(el){var style=window.getComputedStyle(el,null);return el.clientWidth-parseInt(style.getPropertyValue("padding-left"),10)-parseInt(style.getPropertyValue("padding-right"),10)}function isElement(o){return typeof HTMLElement==="object"?o instanceof HTMLElement:o&&typeof o==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string"}function hasClass(element,cls){return(" "+element.className+" ").indexOf(" "+cls+" ")>-1}function addStyleSheet(){if(document.getElementById("textFitStyleSheet"))return;var style=[".textFitAlignVert{","position: absolute;","top: 0; right: 0; bottom: 0; left: 0;","margin: auto;","display: flex;","justify-content: center;","flex-direction: column;","}",".textFitAlignVertFlex{","display: flex;","}",".textFitAlignVertFlex .textFitAlignVert{","position: static;","}"].join("");var css=document.createElement("style");css.type="text/css";css.id="textFitStyleSheet";css.innerHTML=style;document.body.appendChild(css)}});
  </script>

  <script>
    const loadAllFonts = async (fontFamilies) => {
      for (let family of fontFamilies) {
        await loadFont(family);
      }
    };

    loadAllFonts(['Cormorant', 'Montserrat']).then(() => {
      document.fonts.ready.then(() => {
        textFit(document.getElementsByClassName('textToFit'), {
          multiLine: true,
          detectMultiLine: false,
          maxFontSize: 1000,
        });
      });
    });
  </script>
</html>
